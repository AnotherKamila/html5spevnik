<!DOCTYPE html>  <html> <head>   <title>Spevnik.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="DB.html">                 DB.coffee               </a>                                           <a class="source" href="Sentinel.html">                 Sentinel.coffee               </a>                                           <a class="source" href="Spevnik.html">                 Spevnik.coffee               </a>                                           <a class="source" href="Utils.html">                 Utils.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               Spevnik.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>The really core stuff is defined here.</p>

<p>Provides Spevnik's event methods.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">module</span> <span class="s">&#39;Spevnik&#39;</span><span class="p">,</span> <span class="nf">(exports) -&gt;</span>
    <span class="nv">exports.version = </span><span class="s">&#39;0.0.1&#39;</span>

    <span class="nv">debug = </span><span class="kc">true</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>We will have an event-based architecture. The core core core part is
basically just this fact. Here I define the methods for firing events and
attaching event handlers. All message-passing between modules will be done
using these (probably).</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Use this to attach event handlers to events. The callback will get a
single argument: the event object that the sender supplied, if any.</p>

<p>For now only literal event names are supported, but regex support might be
added if the need arises (i.e. I have a very rough idea of how to do it,
but I am too lazy).</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">exports.onEvent = </span><span class="nf">(eventName, callback) -&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>I am using the <code>window</code> object here rather than creating a custom one
and extending it with Mootools Events. The reason is simply that I do
not know of any drawbacks of doing this.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nb">window</span><span class="p">.</span><span class="nx">addEvent</span> <span class="nx">eventName</span><span class="p">,</span> <span class="nx">callback</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Use this to fire events that other modules can bind to. This is the
preferred way to pass messages between modules. Any relevant data attached
to that event should be passed as the second parameter.</p>

<p>Event names should follow the <code>'eventcategory.eventtype'</code> or possibly
<code>'module.eventtype'</code> convention wherever it makes sense.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">exports.fireEvent = </span><span class="nf">(eventName, eventObj) -&gt;</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="s">&quot;Events: </span><span class="si">#{</span><span class="nx">eventName</span><span class="si">}</span><span class="s"> has fired.&quot;</span> <span class="k">if</span> <span class="nx">debug</span>
        <span class="nb">window</span><span class="p">.</span><span class="nx">fireEvent</span> <span class="nx">eventName</span><span class="p">,</span> <span class="nx">eventObj</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 